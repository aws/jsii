#!/usr/bin/env node
const fs = require('fs-extra');

// currently all modules have the same version,
// so "tools" will also have it in it's package.json.
const version = require('../package.json').version;

for (const file of process.argv.slice(2)) {
  const assembly = fs.readJsonSync(file);
  assembly.version = version;

  // update all dependency versions, assuming they are also from this repo
  Object.keys(assembly.dependencies || {}).forEach(dep => assembly.dependencies[dep].version = version);

  // update local copy
  fs.writeJsonSync(file, assembly, { spaces: 2 });
}
